## grpc版本控制

grpc服务更改时，应考虑一下内容：

* 更改会对客户端造成如何影响
* 应实现支持更改对版本控制策略

### 向后兼容性

grpc协议旨在支持随时间变化的服务。通常grpc服务和方法会不中断的新增内容。非中断性变更允许现有客户端继续工作而不做任何更改。更改或删除grpc服务是中断性变更。grpc服务发生中断性变更时，必须更新和重新部署使用该服务的客户端。

对服务进行非中断性变更有一下好处：

* 现有客户端继续运行
* 避免向客户端通知中断性变更并进行更新
* 只需要记录和维护服务对一个版本

### 非重大变化

在grpc协议级别和二进制级别，这些变更不会中断。

* 添加新服务
* 向新服务添加新方法
* 将字段添加到请求消息 - 添加到请求消息的字段将在服务器上通过默认值（若未设置）进行反序列化。若要实现非中断性变更，当新字段不是由旧客户端设置时，服务必须成功。
* 将字段添加到响应消息 - 添加到响应消息的字段将反序列化到客户端上消息的未知字段集合中
* 向枚举添加新值 - 枚举被序列化为数值。新的枚举在客户端反序列化为没有枚举名的枚举值。若要实现非中断性变更，旧客户端在接收新枚举值时必须正确运行。

